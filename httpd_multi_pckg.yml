---
- name: install HTTP server
  hosts: g3
  become: yes
  tasks:
   - name: install HTTPD
     yum:
       name: httpd
       state: present
     when: ansible_distribution == "Amazon"

   - name: start Httpd
     service:
       name: httpd 
       state: started
     when: ansible_distribution == "Amazon"

   - name: Enable Httpd
     service:
       name: httpd 
       enabled: yes 
     when: ansible_distribution == "Amazon"

- name: install Apache server
  hosts: n7
  become: yes
  tasks:
   - name: install Apache2
     apt:
       name: apache
       state: present
     when: ansible_distribution == "Debian"

   - name: start apache2
     service:
       name: apache2 
       state: started
     when: ansible_distribution == "Debian"

   - name: Enable Apache2
     service:
       name: apache2 
       enabled: yes 
     when: ansible_distribution == "Debian"

- name: install HTTP server
  hosts: n1 
  become: yes
  tasks:
   - name: install HTTPD
     yum:
       name: httpd
       state: present
     when: ansible_distribution == "CentOS"

   - name: start Httpd
     service:
       name: httpd 
       state: started
     when: ansible_distribution == "Centos"

   - name: Enable Httpd
     service:
       name: httpd 
       enabled: yes 
     when: ansible_distribution == "CentOS"

   - name: install Apache2
     apt:
       name: apache2
       state: present
     when: ansible_distribution == "Ubuntu"

   - name: start apache2
     service:
       name: apache2 
       state: started
     when: ansible_distribution == "Ubuntu"

   - name: Enable Apache2
     service:
       name: apache2 
       enabled: yes 
     when: ansible_distribution == "Ubuntu"
...
